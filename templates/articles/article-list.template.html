<!-- Supporting home route for result of the search panel, 
all_articles route for listing all the articles and 
my articles route listing articles owned by current user. -->

<!doctype html>
{% extends 'base.template.html' %}

{% block header %}
<h1>{% block title %}{% if listtype=='all' %}All Articles{% elif listtype=="my" %}My Articles{% else %}Articles Search{% endif %}{% endblock %}</h1>
{% endblock %}

<!-- This section display the criteria of the search if the listing is result of a search. -->

{% block content %}
{% if (listtype=="search") %}
    <div class="black-border blur-shadow search-param">
        Searched for articles which fulfil the following conditions:<br>
        <ul>
            {% if (form.getlist('check-search-titles')) %}
                {% if (form.get('search-title').strip() == "") %}
                    <li>any words</li>
                {% else %}
                    <li>titles contain '{{form.get('search-title')}}'</li>
                {% endif %}
            {% endif %}
            {% if (form.getlist('check-search-locations')) and locationArray|length > 0 %}
                <li>cleaning:
                    <ul>
                    {% for each_location in locationArray %}
                        <li>{{each_location}}</li>
                    {% endfor %}
                    </ul>
                </li>
            {% endif %}
            {% if (form.getlist('check-search-tags')) and tagsArray|length > 0 %}
                {% if (tagsArray|length) > 1 %}
                    <li>with one or more of these tags:
                        <ul>
                            {% for each_tag in tagsArray %}
                                <li>{{each_tag}}</li>
                            {% endfor %}
                        </ul>
                    </li>
                {% else %}
                    <li>with this tag:
                        <ul>
                            {% for each_tag in tagsArray %}
                                <li>{{each_tag}}</li>
                            {% endfor %}
                        </ul>
                    </li>
                {% endif %}
            {% endif %}
        </ul>
    </div>
{% endif %}

<!-- This section display a list of requested articles. -->

<div class="container black-border blur-shadow p-3 pb-5 mb-5"> 
    <table id="myTable" class=" display dataTable article-title" data-page-length="10" style="width:100%">
        <thead>
            <tr>
                <td>
                    <strong>Article Title</strong>
                </td>
                <td>
                    <strong>Cleaning Location</strong>
                </td>
                <td>
                    View
                </td>
            </tr>
        </thead>
        <tbody>
            {% for article in articles %}
            <tr>
                <td>
                    {{article.article_title}}
                </td>
                <td>
                    {{article.cleaning_location}}

                </td>
                <td class="mx-auto">
                    <a href="/articles/{{article._id}}" class="btn btn-primary btn-md">
                        View
                    </a>
                    <a href="/articles/delete/{{article._id}}" class="btn btn-danger btn-md">
                        Delete
                    </a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
<div>

{% endblock %}
