<!doctype html>
{% extends 'base.template.html' %}

{% block header %}
  <h1>{% block title %}Users Administration{% endblock %}</h1>
{% endblock %}

{% block content %}

{{sortby}} \ {{sortorder}} \ {{pagenum}} \ {{user_data}}


<table class="table table-bordered">
    <thead>
        <tr>
            <th scope="col">
                {% if sortby == 'nickname' %}
                    {% if sortorder == 'asc' %}
                        <a href="/users/manage?sortby=nickname&sortorder=desc">Nickname {{ordericon}}</a>
                    {% else %}
                        <a href="/users/manage?sortby=nickname&sortorder=asc">Nickname {{ordericon}}</a>
                    {% endif %}
                {% else %}
                    {% if sortorder == 'asc' %}
                        <a href="/users/manage?sortby=nickname&sortorder=asc">Nickname</a>
                    {% else %}
                        <a href="/users/manage?sortby=nickname&sortorder=desc">Nickname</a>
                    {% endif %}
                {% endif %}
            </th> 
            <th scope="col">
                {% if sortby == 'email' %}
                    {% if sortorder == 'asc' %}
                        <a href="/users/manage?sortby=email&sortorder=desc">Email Address {{ordericon}}</a>
                    {% else %}
                        <a href="/users/manage?sortby=email&sortorder=asc">Email Address {{ordericon}}</a>
                    {% endif %}
                {% else %}
                    {% if sortorder == 'asc' %}
                        <a href="/users/manage?sortby=email&sortorder=asc">Email Address</a>
                    {% else %}
                        <a href="/users/manage?sortby=email&sortorder=desc">Email Address</a>
                    {% endif %}
                {% endif %}
            </th>
            <th scope="col">
                {% if sortby == 'admin' %}
                    {% if sortorder == 'asc' %}
                        <a href="/users/manage?sortby=admin&sortorder=desc">Admin? {{ordericon}}</a>
                    {% else %}
                        <a href="/users/manage?sortby=admin&sortorder=asc">Admin? {{ordericon}}</a>
                    {% endif %}
                {% else %}
                  {% if sortorder == 'asc' %}
                        <a href="/users/manage?sortby=admin&sortorder=asc">Admin?</a>
                    {% else %}
                        <a href="/users/manage?sortby=admin&sortorder=desc">Admin?</a>
                    {% endif %}
                {% endif %}
            </th>
            <th>
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        {%for user in user_data%}
        <tr>
            <td scope="row">{{user.nickname}}</td>
            <td scope="row">{{user.email}}</td>
            <td scope="row">{% if user.admin %}Yes{% else %}No{% endif %}</td>
            <td>
                <form method="post" name="form" target="_self">
                    <button type="submit" class="btn btn-primary">Edit</button>
                    <input type="hidden" name="action" value="edit">
                    <input type="hidden" name="id" value="{{user._id}}">
                </form>
            </td>
            <td>
                <form method="post" name="form" target="_self">
                    <button type="submit" class="btn btn-danger">Delete</button>
                    <input type="hidden" name="action" value="delete">
                    <input type="hidden" name="id" value="{{user._id}}">
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}
